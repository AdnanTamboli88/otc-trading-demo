<!DOCTYPE html>
<html>
<head>
    <title>EUR/GBP OTC</title>
    <style>
        body {
            margin: 0;
            background: #0f172a;
            color: white;
            font-family: Arial;
            text-align: center;
        }

        h2 {
            padding-top: 10px;
        }

        .top {
            display: flex;
            justify-content: space-between;
            padding: 15px 40px;
            font-size: 18px;
        }

        .timer {
            color: #facc15;
        }

        .controls {
            margin: 20px;
        }

        input {
            padding: 8px;
            width: 100px;
            text-align: center;
            font-size: 16px;
        }

        button {
            padding: 12px 30px;
            margin: 10px;
            font-size: 16px;
            border: none;
            border-radius: 6px;
            cursor: pointer;
        }

        .up { background: #16a34a; color: white; }
        .down { background: #dc2626; color: white; }
    </style>
</head>
<body>

<h2>EUR/GBP OTC</h2>

<div class="top">
    <div>Balance: $<span id="balance">1000</span></div>
    <div class="timer">Timer: <span id="timer">--</span></div>
</div>

<!-- TradingView Chart -->
<div id="tradingview_chart"></div>

<div class="controls">
    Trade Amount: $
    <input type="number" id="amount" value="10" min="1"><br>
    <button class="up" onclick="placeTrade('up')">UP</button>
    <button class="down" onclick="placeTrade('down')">DOWN</button>
</div>

<script src="https://s3.tradingview.com/tv.js"></script>

<script>
new TradingView.widget({
  "width": "100%",
  "height": 500,
  "symbol": "FX:EURGBP",
  "interval": "1",
  "timezone": "Asia/Kolkata",
  "theme": "dark",
  "style": "1",
  "locale": "en",
  "toolbar_bg": "#0f172a",
  "enable_publishing": false,
  "allow_symbol_change": false,
  "container_id": "tradingview_chart"
});
</script>

<script>
let balance = 1000;
let tradeActive = false;
let entryPrice = 0;
let tradeDirection = "";
let expiry = 60;
let timerInterval;

// Fake price simulation for demo result
function getFakePrice() {
    return 1.1000 + (Math.random() - 0.5) * 0.01;
}

function placeTrade(direction) {
    if (tradeActive) return;

    let amount = parseFloat(document.getElementById("amount").value);

    if (amount <= 0 || amount > balance) {
        alert("Invalid amount!");
        return;
    }

    tradeActive = true;
    tradeDirection = direction;
    entryPrice = getFakePrice();

    balance -= amount;
    document.getElementById("balance").innerText = balance;

    let timeLeft = expiry;
    document.getElementById("timer").innerText = timeLeft;

    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = timeLeft;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            finishTrade(amount);
        }
    }, 1000);
}

function finishTrade(amount) {
    let exitPrice = getFakePrice();
    let win = false;

    if (tradeDirection === "up" && exitPrice > entryPrice) win = true;
    if (tradeDirection === "down" && exitPrice < entryPrice) win = true;

    if (win) {
        balance += amount * 1.8;
        alert("You Win!");
    } else {
        alert("You Lose!");
    }

    document.getElementById("balance").innerText = balance;
    document.getElementById("timer").innerText = "--";
    tradeActive = false;
}
</script>

</body>
</html>
