<!DOCTYPE html>
<html>
<head>
    <title>EUR/GBP OTC</title>
    <style>
        body {
            margin:0;
            background:#0f172a;
            color:white;
            font-family:Arial;
        }

        h2 {
            text-align:center;
            margin-top:10px;
        }

        .top-bar {
            display:flex;
            justify-content:space-between;
            padding:15px 30px;
        }

        .balance { font-size:18px; }
        .timer { color:#facc15; }

        .right-panel {
            position:absolute;
            top:80px;
            right:30px;
            background:#111827;
            padding:20px;
            border-radius:10px;
            width:200px;
        }

        .right-panel input {
            width:100%;
            padding:8px;
            margin-bottom:10px;
            text-align:center;
            font-size:16px;
        }

        .right-panel button {
            width:100%;
            padding:12px;
            margin-top:8px;
            border:none;
            border-radius:6px;
            font-size:16px;
            cursor:pointer;
        }

        .up { background:#16a34a; color:white; }
        .down { background:#dc2626; color:white; }

        #resultMessage {
            position:absolute;
            top:50%;
            left:50%;
            transform:translate(-50%, -50%);
            font-size:28px;
            font-weight:bold;
            display:none;
        }
    </style>
</head>
<body>

<h2>EUR/GBP OTC</h2>

<div class="top-bar">
    <div class="balance">Balance: $<span id="balance">1000</span></div>
    <div class="timer">Timer: <span id="timer">--</span></div>
</div>

<div id="tradingview_chart"></div>

<div class="right-panel">
    Trade Amount $
    <input type="number" id="amount" value="10" min="1">
    <button class="up" onclick="placeTrade('up')">UP</button>
    <button class="down" onclick="placeTrade('down')">DOWN</button>
</div>

<div id="resultMessage"></div>

<script src="https://s3.tradingview.com/tv.js"></script>

<script>
new TradingView.widget({
  "width": "100%",
  "height": 600,
  "symbol": "FX:EURGBP",
  "interval": "1",
  "timezone": "Asia/Kolkata",
  "theme": "dark",
  "style": "1",
  "locale": "en",
  "toolbar_bg": "#0f172a",
  "enable_publishing": false,
  "allow_symbol_change": false,
  "container_id": "tradingview_chart"
});
</script>

<script>
let balance = 1000;
let tradeActive = false;
let entryPrice = 0;
let tradeDirection = "";
let expiry = 60;
let timerInterval;
let entryLine = null;

function getFakePrice() {
    return 1.1000 + (Math.random() - 0.5) * 0.01;
}

function placeTrade(direction) {
    if (tradeActive) return;

    let amount = parseFloat(document.getElementById("amount").value);
    if (amount <= 0 || amount > balance) return;

    tradeActive = true;
    tradeDirection = direction;
    entryPrice = getFakePrice();
    balance -= amount;
    document.getElementById("balance").innerText = balance;

    showEntryLine(entryPrice);

    let timeLeft = expiry;
    document.getElementById("timer").innerText = timeLeft;

    timerInterval = setInterval(() => {
        timeLeft--;
        document.getElementById("timer").innerText = timeLeft;

        if (timeLeft <= 0) {
            clearInterval(timerInterval);
            finishTrade(amount);
        }
    }, 1000);
}

function showEntryLine(price) {
    if(entryLine) entryLine.remove();

    entryLine = document.createElement("div");
    entryLine.style.position = "absolute";
    entryLine.style.top = "300px";
    entryLine.style.left = "0";
    entryLine.style.width = "100%";
    entryLine.style.height = "2px";
    entryLine.style.background = "yellow";
    entryLine.style.zIndex = "10";

    document.body.appendChild(entryLine);
}

function finishTrade(amount) {
    let exitPrice = getFakePrice();
    let win = false;

    if (tradeDirection === "up" && exitPrice > entryPrice) win = true;
    if (tradeDirection === "down" && exitPrice < entryPrice) win = true;

    let resultDiv = document.getElementById("resultMessage");

    if (win) {
        balance += amount * 1.8;
        resultDiv.style.color = "#22c55e";
        resultDiv.innerText = "WIN";
        entryLine.style.background = "#22c55e";
    } else {
        resultDiv.style.color = "#ef4444";
        resultDiv.innerText = "LOSS";
        entryLine.style.background = "#ef4444";
    }

    document.getElementById("balance").innerText = balance;
    resultDiv.style.display = "block";

    setTimeout(() => {
        resultDiv.style.display = "none";
        if(entryLine) entryLine.remove();
    }, 3000);

    document.getElementById("timer").innerText = "--";
    tradeActive = false;
}
</script>

</body>
</html>

